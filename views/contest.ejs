<%- include("partials/header.ejs") %>

<!-- Navbar -->
    <%- include("partials/navbar.ejs") %> 

    <div class="contest-live">

        <div class="contest-nav">
            <a href="/contest/<%= contest.id %>/problems" id="problems">Problems</a>
            <a href="/contest/<%= contest.id %>/standings" id="standings">Standings</a>
        </div>

        <div class="box-one contest-div contest-box">

            <!---------- Problems ---------->
            <% if (!standings){ %>
                <h4>Problems</h4>

                <div class="row contest-row-div">
                    <div class="col-2 contest-col-div">
                        <span>#</span>
                    </div>
                    <div class="col-8 contest-col-div">
                        <span>Name</span>
                    </div>
                    <div class="col-2 contest-col-div contest-col-div-last">
                        <span></span>
                    </div>

                </div>

                <% for (let i=0; i<problems.length; i++){ %>
                    <% if (i%2 === 0){ %> 
                        <div class="row contest-row-div contest-row-div-background">
                            <div class="col-2 contest-col-div contest-col-div-info">
                                <a href="/contest/<%= contest.id %>/<%= problems[i].id %>"><%= problems[i].id %></a>
                            </div>
                            <div class="col-8 contest-col-div contest-col-div-info">
                                <a href="/contest/<%= contest.id %>/<%= problems[i].id %>"><%= problems[i].name %></a>
                            </div>
                            <div class="col-2 contest-col-div contest-col-div-last contest-col-div-info">
                                <span>x</span>
                            </div>
                        </div>
                    <% } else { %>
                        <div class="row contest-row-div">
                            <div class="col-2 contest-col-div contest-col-div-info">
                                <a href="/contest/<%= contest.id %>/<%= problems[i].id %>"><%= problems[i].id %></a>
                            </div>
                            <div class="col-8 contest-col-div contest-col-div-info">
                                <a href="/contest/<%= contest.id %>/<%= problems[i].id %>"><%= problems[i].name %></a>
                            </div>
                            <div class="col-2 contest-col-div contest-col-div-last contest-col-div-info">
                                <span>x</span>
                            </div>
                        </div>
                    <% } %> 
                <% }; %>
            
            <!---------- Standings ---------->
            <% } else { %>
                <h4>Standings</h4>

                <div class="row contest-row-div">
                    <div class="col-1 contest-col-div">
                        <span>#</span>
                    </div>
                    <div class="col-3 contest-col-div">
                        <span>Who</span>
                    </div>
                    <div class="col-1 contest-col-div">
                        <span>=</span>
                    </div>

                    <% for (let i=0; i<contest.problems.length; i++){ %>
                        <% if (i === contest.problems.length-1){ %> 
                            <div class="col contest-col-div contest-col-div-last">
                                <span><%= contest.problems[i] %></span>
                            </div>
                        <% } else { %> 
                            <div class="col contest-col-div">
                                <span><%= contest.problems[i] %></span>
                            </div>
                        <% } %>
                    <% } %> 
                </div>

                <% for (let i=0; i<users.length; i++){ %>
                    <% if (i%2 === 0){ %> 
                        <div class="row contest-row-div contest-row-div-background">
                            <div class="col-1 contest-col-div contest-col-div-info">
                                <span><%= i+1 %></span>
                            </div>
                            <div class="col-3 contest-col-div contest-col-div-info">
                                <span><%= users[i].username %></span>
                            </div>
                            <div class="col-1 contest-col-div contest-col-div-info">
                                <span><%= users[i].score %></span>
                            </div>
                            <% for (let j=0; j<contest.problems.length; j++){ %>
                                <% if (j === contest.problems.length-1){ %> 
                                    <div class="col contest-col-div contest-col-div-last contest-col-div-info">
                                        <span><%= users[i].problems[j].score %></span>
                                    </div>
                                <% } else { %> 
                                    <div class="col contest-col-div contest-col-div-info">
                                        <span><%= users[i].problems[j].score %></span>
                                    </div>
                                <% } %>
                            <% } %>
                        </div>
                    <% } else { %>
                        <div class="row contest-row-div">
                            <div class="col-1 contest-col-div contest-col-div-info">
                                <span><%= i+1 %></span>
                            </div>
                            <div class="col-3 contest-col-div contest-col-div-info">
                                <span><%= users[i].username %></span>
                            </div>
                            <div class="col-1 contest-col-div contest-col-div-info">
                                <span><%= users[i].score %></span>
                            </div>
                            <% for (let j=0; j<contest.problems.length; j++){ %>
                                <% if (j === contest.problems.length-1){ %> 
                                    <div class="col contest-col-div contest-col-div-last contest-col-div-info">
                                        <span><%= users[i].problems[j].score %></span>
                                    </div>
                                <% } else { %> 
                                    <div class="col contest-col-div contest-col-div-info">
                                        <span><%= users[i].problems[j].score %></span>
                                    </div>
                                <% } %>
                            <% } %>
                        </div>
                    <% } %> 
                <% } %>

            <% } %>
        </div>

    </div>

<%- include("partials/footer.ejs") %> 